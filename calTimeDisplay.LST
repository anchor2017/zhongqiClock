C51 COMPILER V9.56.0.0   CALTIMEDISPLAY                                                    07/24/2017 20:10:08 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE CALTIMEDISPLAY
OBJECT MODULE PLACED IN calTimeDisplay.OBJ
COMPILER INVOKED BY: F:\keil51\C51\BIN\C51.EXE calTimeDisplay.c OPTIMIZE(9,SIZE) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /***************************************************************************************
   2           *  FileName          : calTimeDisplay.c
   3           *  CopyRight         : 
   4           *  ModuleName          :  
   5           *
   6           *  CPU             :
   7           *  RTOS            :
   8           *
   9           *  Create Data         : 
  10           *  Author/Corportation     :  caiyinmao
  11           *
  12           *  Abstract Description    :  显示界面
  13           *
  14           *--------------------------------Revision History--------------------------------------
  15           *  No  version   Data      Revised By      Item      Description
  16           *  
  17           *
  18           ***************************************************************************************/
  19          
  20          
  21          /**************************************************************
  22          * Debug switch Section
  23          **************************************************************/
  24          
  25          
  26          /**************************************************************
  27          * Include File Section
  28          **************************************************************/
  29          
  30          #include "calTimeDisplay.h"
  31          #include "touch.h"
  32          #include "paintTFT.h"
  33          #include "GUI.h"
  34          #include "lcd_driver.h"
  35          #include "clock.h"    //引用全局变量time
  36          /**************************************************************
  37          * Macro Define Section
  38          **************************************************************/
  39          
  40          /**************************************************************
  41          * Struct Define Section
  42          **************************************************************/
  43          
  44          
  45          /**************************************************************
  46          * Prototype Declare Section
  47          **************************************************************/
  48          
  49          
  50          /**************************************************************
  51          * Global Variable Declare Section
  52          **************************************************************/
  53          
  54          
  55          /**************************************************************
C51 COMPILER V9.56.0.0   CALTIMEDISPLAY                                                    07/24/2017 20:10:08 PAGE 2   

  56          * File Static Variable Define Section
  57          **************************************************************/
  58          
  59          /**************************************************************
  60          * Function Define Section
  61          **************************************************************/
  62          
  63          
  64          /**
  65          *  @name:void displayPageSet()
  66          * @description: 显示设置时间界面
  67           *  @param    :none
  68           *  @return   : none
  69           *  @notice : none
  70           */
  71          void displayPageSetTime()
  72          {
  73   1          /*线条及数字的基本框图*/    
  74   1          TFT_paintSetSur("TIME");
  75   1          /*将时间写在设置界面左偏上*/   
  76   1          TFT_paintTimeSet(time);          
  77   1          clockFlag=0;     //如果在设置界面则时钟界面的触屏无效
  78   1          setFlag=1;     //如果在设置界面则设置界面的触屏有效
  79   1          anotherSur=1; //从设置界面返回主时钟界面需要清屏  
  80   1          setTime();        //设置时间
  81   1      }
  82          
  83          /**
  84          *  @name:void displayPageSetClock()
  85          * @description: 显示设置闹钟界面
  86           *  @param    :none
  87           *  @return   : none
  88           *  @notice : none
  89           */
  90          void displayPageSetClock()
  91          {
  92   1          /*线条及数字的基本框图*/    
  93   1          TFT_paintSetSur("CLOCK");
  94   1          /*将时间写在设置界面左偏上*/   
  95   1          TFT_paintTimeSet(timeclock);           
  96   1          clockFlag=0;     //如果在设置界面则时钟界面的触屏无效
  97   1          setFlag=1;     //如果在设置界面则设置界面的触屏有效
  98   1          anotherSur=1; //从设置界面返回主时钟界面需要清屏  
  99   1          setClockTime();
 100   1      }
 101          
 102          
 103          
 104          /**
 105          *  @name: displayPageSetting
 106          * @description: 显示设置界面
 107           *  @param    :none
 108           *  @return   : none
 109           *  @notice : none
 110           */
 111          void displayPageSetting()
 112          {
 113   1        TFT_ClearScreen(0x0000);    //清屏  
 114   1        GUI_WriteASCII(0,0, "BACK", 0x001F, 0x0000);
 115   1        GUI_WriteASCII(50,24, "SET", 0xFFE0, 0x0000);
 116   1        GUI_WriteASCII(50, 94, "TIME", 0x7ff, 0x0000);  
 117   1        GUI_WriteASCII(50, 134, "CLOCK", 0x7fff, 0x0000); 
C51 COMPILER V9.56.0.0   CALTIMEDISPLAY                                                    07/24/2017 20:10:08 PAGE 3   

 118   1        GUI_Line(20, 50, 155, 50, 0xF800);     //画横线
 119   1        GUI_Line(20, 130, 155, 130, 0xF800);  //x, y, x, y
 120   1        GUI_Line(20, 170, 155, 170, 0xF800);  //x, y, x, y
 121   1        while(1) 
 122   1         {
 123   2          if(TOUCH_XPT_ReadXY() == 1)   
 124   2          {
 125   3            /*转化*/
 126   3            x=xpt_xy.x;
 127   3            x=(x-304)*175/3422;
 128   3            y=xpt_xy.y;
 129   3            y=(y-256)*219/3440;     
 130   3            if(x>174)
 131   3            {
 132   4              x=174;
 133   4            }
 134   3            if(y>218)
 135   3            {
 136   4                y=218;
 137   4            }
 138   3            if( y < 135 && y > 95)       //选择设置时间
 139   3            {
 140   4              displayPageSetTime();
 141   4            }
 142   3            else if( y > 135 && y < 165)   // 选择设置闹钟
 143   3            {
 144   4              displayPageSetClock();
 145   4            }
 146   3            else if((x<55)&&(y<24))  //左上角
 147   3            {
 148   4              back=1;
 149   4              set = 0;
 150   4            TFT_ClearScreen(0x0000);    //清屏
 151   4              break;   //退出循环       
 152   4            }
 153   3          }
 154   2        }   
 155   1      }
 156          
 157            


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    533    ----
   CONSTANT SIZE    =     20    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
